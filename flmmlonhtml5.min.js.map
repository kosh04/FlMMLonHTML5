{"version":3,"file":"flmmlonhtml5.min.js","sources":["flmmlonhtml5.js"],"names":["FlMMLonHTML5","debug","str","divDebug","document","createElement","body","appendChild","div","createTextNode","divs","getElementsByTagName","length","removeChild","firstChild","extend","target","object","name","workerURL","worker","this","Worker","addEventListener","onMessage","bind","onAudioProcessBinded","onAudioProcess","warnings","totalTimeStr","bufferReady","volume","events","postMessage","type","COM_BOOT","sampleRate","audioCtx","bufferSize","BUFFER_SIZE","setInfoInterval","COM_PLAY","COM_STOP","COM_PAUSE","COM_BUFFER","COM_COMPCOMP","COM_BUFRING","COM_COMPLETE","COM_SYNCINFO","COM_PLAYSOUND","COM_STOPSOUND","COM_DEBUG","emptyBuffer","Float32Array","prototype","e","data","buffer","info","oncompilecomplete","trigger","onbuffering","oncomplete","onsyncinfo","playSound","stopSound","isFlushBuf","gain","scrProc","oscDmy","createGain","value","connect","destination","createScriptProcessor","createOscillator","start","removeEventListener","disconnect","outBuf","outputBuffer","getChannelData","set","retBuf","args","handlers","i","len","call","play","mml","stop","pause","setMasterVolume","isPlaying","_isPlaying","isPaused","_isPaused","getWarnings","getTotalMSec","totalMSec","getTotalTimeStr","getNowMSec","nowMSec","getNowTimeStr","nowTimeStr","getVoiceCount","voiceCount","getMetaTitle","metaTitle","getMetaComment","metaComment","getMetaArtist","metaArtist","getMetaCoding","metaCoding","interval","syncInfo","listener","push","splice","release","terminate","AudioCtx","window","AudioContext","webkitAudioContext","onClick","bufSrcDmy","createBufferSource"],"mappings":"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"}